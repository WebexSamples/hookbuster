{"version":3,"sources":["index.js"],"names":["Members","attrs","options","namespace","MEETINGS","membersRequest","MembersRequest","membersCollection","MembersCollection","locusUrl","hostId","type","selfId","mediaShareContentId","payload","newSelfId","oldSelfId","newSelf","id","oldSelf","theSelf","get","setIsSelf","notSelf","Trigger","trigger","file","function","EVENT_TRIGGERS","MEMBERS_SELF_UPDATE","activeSelfId","endedSelfId","newHostId","oldHostId","newHost","oldHost","theHost","setIsHost","notHost","MEMBERS_HOST_UPDATE","activeHostId","endedHostId","delta","handleLocusInfoUpdatedParticipants","full","handleMembersUpdate","MEMBERS_UPDATE","currentContent","current","previousContent","previous","whoSharing","whoStopped","contentId","disposition","FLOOR_ACTION","GRANTED","RELEASED","shareMember","setIsContentSharing","stopMember","MEMBERS_CONTENT_UPDATE","activeContentSharingId","endedContentSharingId","setLocusUrl","setType","membersUpdate","updated","constructMembers","added","getAll","list","forEach","member","set","participants","LoggerProxy","logger","warn","memberUpdate","update","locus","url","ParameterError","owner","info","fullState","self","person","contentMediaShare","mediaShares","length","find","mediaShare","name","CONTENT","floor","beneficiary","participant","hideInRoster","existing","push","Member","contentSharingId","invitee","alertIfActive","reject","MembersUtil","isInvalidInvitee","generateAddMemberOptions","addMembers","memberIds","generateAdmitMemberOptions","admitMember","memberId","generateRemoveMemberOptions","removeMember","mute","generateMuteMemberOptions","muteMember","moderator","generateTransferHostMemberOptions","transferHostToMember","StatelessWebexPlugin"],"mappings":"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","file":"index.js","sourcesContent":["/*!\n * Copyright (c) 2015-2019 Cisco Systems, Inc. See LICENSE file.\n */\nimport {isEmpty} from 'lodash';\nimport {StatelessWebexPlugin} from '@webex/webex-core';\n\nimport {MEETINGS, EVENT_TRIGGERS, FLOOR_ACTION, CONTENT} from '../constants';\nimport Trigger from '../common/events/trigger-proxy';\nimport Member from '../member';\nimport LoggerProxy from '../common/logs/logger-proxy';\nimport ParameterError from '../common/errors/parameter';\n\nimport MembersCollection from './collection';\nimport MembersRequest from './request';\nimport MembersUtil from './util';\n\n/**\n   * Members Update Event\n   * Emitted when something in the roster list needs to be updated\n   * @event members:update\n   * @instance\n   * @property {Object} delta the changes to the members list\n   * @property {Array} delta.updated array only the updates, includes removals, as they will have updated status and member properties\n   * @property {Array} delta.added array added members to the meeting\n   * @property {Array} full array the full members collection\n   * @memberof Members\n   */\n\n/**\n   * Members Content Update Event\n   * Emitted when who is sharing changes\n   * @event members:content:update\n   * @instance\n   * @property {String} activeContentSharingId\n   * @property {String} endedContentSharingId\n   * @memberof Members\n   */\n\n/**\n   * Members Host Update Event\n   * Emitted when who is the host changes\n   * @event members:host:update\n   * @instance\n   * @property {String} activeHostId\n   * @property {String} endedHostId\n   * @memberof Members\n   */\n\n/**\n   * Members Self Update Event\n   * Emitted when who is the self changes\n   * @event members:self:update\n   * @instance\n   * @property {String} activeSelfId\n   * @property {String} endedSelfId\n   * @memberof Members\n   */\n\n/**\n * @class Members\n */\nexport default class Members extends StatelessWebexPlugin {\n  namespace = MEETINGS;\n\n  /**\n   *\n   * @param {Object} attrs\n   * @param {Object} options\n   * @memberof Members\n   */\n  constructor(attrs, options) {\n    super({}, options);\n    /**\n     * The Members Request object to interact with server\n     * @instance\n     * @type {MembersRequest}\n     * @private\n     * @memberof Members\n    */\n    this.membersRequest = new MembersRequest({}, options);\n    /**\n     * The Members Collection cache\n     * @instance\n     * @type {MembersCollection}\n     * @private\n     * @memberof Members\n    */\n    this.membersCollection = new MembersCollection();\n    /**\n     * The current locus url for the active meeting\n     * @instance\n     * @type {String}\n     * @private\n     * @memberof Members\n    */\n    this.locusUrl = null;\n    /**\n     * The current hostId for the meeting\n     * @instance\n     * @type {String}\n     * @private\n     * @memberof Members\n    */\n    this.hostId = null;\n    /**\n     * The current type for the meeting, could be MEETING or CALL\n     * @instance\n     * @type {String}\n     * @private\n     * @memberof Members\n    */\n    this.type = null;\n    /**\n     * Locus has a self object, sent individually to the client\n     * i.e., each person in the call gets their own self object from locus.\n     * We need to maintain that self object, because we also get information about all the participants\n     * and differentiate those participants from self.\n     * The self id shouldnt ever change, but it does have properties that will change\n     * and we use values in locus-info, such as to determine if i am admitted to the meeting or not as guest.\n     * The current selfId for the meeting\n     * @instance\n     * @type {String}\n     * @private\n     * @memberof Members\n    */\n    this.selfId = null;\n    /**\n     * The current mediaShareContentId for the meeting\n     * @instance\n     * @type {String}\n     * @private\n     * @memberof Members\n    */\n    this.mediaShareContentId = null;\n  }\n\n  /**\n   * Internal update the self Id value\n   * @param {Object} payload\n   * @param {Object} payload.newSelf\n   * @param {Object} payload.oldSelf\n   * @returns {undefined}\n   * @private\n   * @memberof Members\n   */\n  locusSelfUpdate(payload) {\n    let newSelfId = null;\n    let oldSelfId = null;\n\n    if (payload) {\n      if (payload.newSelf) {\n        newSelfId = payload.newSelf.id;\n      }\n      if (payload.oldSelf) {\n        oldSelfId = payload.oldSelf.id;\n      }\n    }\n    if (newSelfId) {\n      const theSelf = this.membersCollection.get(newSelfId);\n\n      if (theSelf) {\n        theSelf.setIsSelf(true);\n      }\n    }\n    if (oldSelfId) {\n      const notSelf = this.membersCollection.get(oldSelfId);\n\n      if (notSelf) {\n        notSelf.setIsSelf(false);\n      }\n    }\n    this.selfId = newSelfId;\n    Trigger.trigger(\n      this,\n      {\n        file: 'members',\n        function: 'locusSelfUpdate'\n      },\n      EVENT_TRIGGERS.MEMBERS_SELF_UPDATE,\n      {\n        activeSelfId: newSelfId,\n        endedSelfId: oldSelfId\n      }\n    );\n  }\n\n  /**\n   * Internal update the hostId value\n   * @param {Object} payload\n   * @param {Object} payload.newHost\n   * @param {Object} payload.oldHost\n   * @returns {undefined}\n   * @private\n   * @memberof Members\n   */\n  locusHostUpdate(payload) {\n    let newHostId = null;\n    let oldHostId = null;\n\n    if (payload) {\n      if (payload.newHost) {\n        newHostId = payload.newHost.id;\n      }\n      if (payload.oldHost) {\n        oldHostId = payload.oldHost.id;\n      }\n    }\n    if (newHostId) {\n      const theHost = this.membersCollection.get(newHostId);\n\n      if (theHost) {\n        theHost.setIsHost(true);\n      }\n    }\n    if (oldHostId) {\n      const notHost = this.membersCollection.get(oldHostId);\n\n      if (notHost) {\n        notHost.setIsHost(false);\n      }\n    }\n    this.hostId = newHostId;\n    Trigger.trigger(\n      this,\n      {\n        file: 'members',\n        function: 'locusHostUpdate'\n      },\n      EVENT_TRIGGERS.MEMBERS_HOST_UPDATE,\n      {\n        activeHostId: newHostId,\n        endedHostId: oldHostId\n      }\n    );\n  }\n\n  /**\n   * when new participant updates come in, both delta and full participants, update them in members collection\n   * delta object in the event will have {updated, added} and full will be the full membersCollection\n   * @param {Object} payload\n   * @param {Object} payload.participants\n   * @returns {undefined}\n   * @private\n   * @memberof Members\n   */\n  locusParticipantsUpdate(payload) {\n    if (payload) {\n      const delta = this.handleLocusInfoUpdatedParticipants(payload);\n      const full = this.handleMembersUpdate(delta); // SDK should propagate the full list for both delta and non delta updates\n\n      Trigger.trigger(\n        this,\n        {\n          file: 'members',\n          function: 'locusParticipantsUpdate'\n        },\n        EVENT_TRIGGERS.MEMBERS_UPDATE,\n        {\n          delta,\n          full\n        }\n      );\n    }\n  }\n\n  /**\n   * Internal update the content id\n   * @param {Object} payload\n   * @param {Object} payload.current\n   * @param {Object} payload.previous\n   * @returns {undefined}\n   * @private\n   * @memberof Members\n   */\n  locusMediaSharesUpdate(payload) {\n    const currentContent = payload.current;\n    const previousContent = payload.previous;\n    let whoSharing = null;\n    let whoStopped = null;\n\n    if (currentContent && currentContent.contentId) {\n      if (currentContent.disposition === FLOOR_ACTION.GRANTED) {\n        whoSharing = currentContent.contentId;\n        whoStopped = previousContent && previousContent.contentId;\n      }\n      else if (currentContent.disposition === FLOOR_ACTION.RELEASED) {\n        whoStopped = currentContent.contentId;\n      }\n    }\n    if (whoSharing) {\n      const shareMember = this.membersCollection.get(whoSharing);\n\n      if (shareMember) {\n        shareMember.setIsContentSharing(true);\n      }\n    }\n    if (whoStopped) {\n      const stopMember = this.membersCollection.get(whoStopped);\n\n      if (stopMember) {\n        stopMember.setIsContentSharing(false);\n      }\n    }\n    this.mediaShareContentId = whoSharing;\n    Trigger.trigger(\n      this,\n      {\n        file: 'members',\n        function: 'locusMediaSharesUpdate'\n      },\n      EVENT_TRIGGERS.MEMBERS_CONTENT_UPDATE,\n      {\n        activeContentSharingId: whoSharing,\n        endedContentSharingId: whoStopped\n      }\n    );\n  }\n\n\n  /**\n   * Internal update the locus url value\n   * @param {Object} payload\n   * @param {String} payload.locusUrl\n   * @returns {undefined}\n   * @private\n   * @memberof Members\n   */\n  locusUrlUpdate(payload) {\n    if (payload) {\n      this.setLocusUrl(null, payload);\n    }\n  }\n\n  /**\n   * Internal update the type of meeting\n   * @param {Object} payload\n   * @param {String} payload.type\n   * @returns {undefined}\n   * @private\n   * @memberof Members\n   */\n  locusFullStateTypeUpdate(payload) {\n    // TODO: at some point there could be a timing issue here, for updating each member\n    // ie., if the type changes AND there is no locus update, then each member will not know the type of call\n    // which means they cannot determine isMutable && isRemovable\n    // for now this scenario is impossible to occur since we always get a locus update when the type changes\n    // except for in delta locus meetings, but in that case, the type will always have been set differently\n    // from the outset anyway\n    if (payload) {\n      this.setType(payload);\n    }\n  }\n\n  /**\n   * sets values in the members collection for updated and added properties from delta\n   * @param {Object} membersUpdate {updated: [], added: []}\n   * @returns {Object} membersCollection\n   * @private\n   * @memberof Members\n   */\n  handleMembersUpdate(membersUpdate) {\n    if (membersUpdate) {\n      if (membersUpdate.updated) {\n        this.constructMembers(membersUpdate.updated);\n      }\n      if (membersUpdate.added) {\n        this.constructMembers(membersUpdate.added);\n      }\n    }\n\n    return this.membersCollection.getAll();\n  }\n\n  /**\n   * set members to the member collection from each updated/added lists as passed in\n   * @param {Array} list\n   * @returns {undefined}\n   * @private\n   * @memberof Members\n   */\n  constructMembers(list) {\n    list.forEach((member) => {\n      this.membersCollection.set(member.id, member);\n    });\n  }\n\n  /**\n   * Internal update the participants value\n   * @param {Object} payload\n   * @returns {Object}\n   * @private\n   * @memberof Members\n   */\n  handleLocusInfoUpdatedParticipants(payload) {\n    this.hostId = payload.hostId || this.hostId;\n    this.selfId = payload.selfId || this.selfId;\n    if (!payload.participants) {\n      LoggerProxy.logger.warn('members/index->handleLocusInfoUpdatedParticipants#participants payload is missing.');\n    }\n    const memberUpdate = this.update(payload.participants);\n\n    return memberUpdate;\n  }\n\n  /**\n   * Update the locus Url\n   * @param {Object} locus\n   * @param {String} [locusUrl] optional, takes precedence\n   * @throws {ParameterError}\n   * @returns {undefined}\n   * @public\n   * @memberof Members\n   */\n  setLocusUrl(locus, locusUrl = null) {\n    if (locusUrl) {\n      this.locusUrl = locusUrl;\n    }\n    else if (locus && (locus.locusUrl || locus.url)) {\n      this.locusUrl = locus.locusUrl || locus.url;\n    }\n    else {\n      throw new ParameterError('Setting locusUrl for the Members module should be done with a locus object or locusUrl');\n    }\n  }\n\n  /**\n   * Update the host id\n   * @param {Object} locus\n   * @param {String} [hostId] optional, takes precedence\n   * @throws {ParameterError}\n   * @returns {undefined}\n   * @public\n   * @memberof Members\n   */\n  setHostId(locus, hostId = null) {\n    if (hostId) {\n      this.hostId = hostId;\n    }\n    else if (locus) {\n      this.hostId = locus && locus.owner && locus.owner.info ? locus.owner.info : null;\n    }\n    else {\n      throw new ParameterError('Setting hostid for the Members module should be done with a locus object or hostId');\n    }\n  }\n\n  /**\n   * Update the type\n   * @param {Object} fullState\n   * @param {String} [type] optional, takes precedence\n   * @throws {ParameterError}\n   * @returns {undefined}\n   * @public\n   * @memberof Members\n   */\n  setType(fullState, type = null) {\n    if (type) {\n      this.type = type;\n    }\n    else if (fullState) {\n      this.type = (fullState && fullState.type) || null;\n    }\n    else {\n      throw new ParameterError('Setting type for the Members module should be done with a fullstate object or type string');\n    }\n  }\n\n  /**\n   * Update the self Id\n   * @param {Object} locus\n   * @param {String} [selfId] optional, takes precedence\n   * @throws {Error}\n   * @returns {undefined}\n   * @memberof Members\n   */\n  setSelfId(locus, selfId = null) {\n    if (selfId) {\n      this.selfId = selfId;\n    }\n    else if (locus) {\n      this.selfId = locus && locus.self && locus.self.person && locus.self.person.id ? locus.self.person.id : null;\n    }\n    else {\n      throw new ParameterError('Setting selfid for the Members module should be done with a locus object or selfId');\n    }\n  }\n\n  /**\n   * Update the media share content id\n   * @param {Object} locus\n   * @param {String} [contentId] optional, takes precedence\n   * @throws {Error}\n   * @returns {undefined}\n   * @memberof Members\n   */\n  setMediaShareContentId(locus, contentId) {\n    if (contentId) {\n      this.mediaShareContentId = contentId;\n    }\n    else if (locus) {\n      const contentMediaShare =\n        locus.mediaShares &&\n        locus.mediaShares.length &&\n        locus.mediaShares.find((mediaShare) => mediaShare.name === CONTENT);\n\n      this.mediaShareContentId =\n        (contentMediaShare &&\n          contentMediaShare.floor &&\n          contentMediaShare.floor.beneficiary &&\n          contentMediaShare.floor.beneficiary.id) ||\n        null;\n    }\n    else {\n      throw new ParameterError('Setting hostid for the Members module should be done with a locus object or hostId');\n    }\n  }\n\n  /**\n   * Find all the updates, and added members\n   * Removed/left members will end up in updates\n   * Each array contains only members\n   * @param {Array} participants the locus participants\n   * @returns {Object} {added: {Array}, updated: {Array}}\n   * @private\n   * @memberof Members\n   */\n  update(participants) {\n    const membersUpdate = {added: [], updated: []};\n\n    if (participants) {\n      participants.forEach((participant) => {\n        if (participant.hideInRoster) {\n          return;\n        }\n        const existing = this.membersCollection.get(participant.id);\n\n        if (existing) {\n          // TODO: compare existing member to new participant coming in properties and determine if updated (this helps for non delta events)\n          // on client re renders, but we will have to determine what values to compare to determine difference, premature optimization\n          membersUpdate.updated.push(\n            new Member(participant, {\n              selfId: this.selfId,\n              hostId: this.hostId,\n              contentSharingId: this.mediaShareContentId,\n              type: this.type\n            })\n          );\n        }\n        else {\n          membersUpdate.added.push(\n            new Member(participant, {\n              selfId: this.selfId,\n              hostId: this.hostId,\n              contentSharingId: this.mediaShareContentId,\n              type: this.type\n            })\n          );\n        }\n      });\n    }\n\n    return membersUpdate;\n  }\n\n  /**\n   * Adds a guest Member to the associated meeting\n   * @param {String} invitee\n   * @param {Boolean} [alertIfActive]\n   * @returns {Promise}\n   * @memberof Members\n   */\n  addMember(invitee, alertIfActive) {\n    if (!this.locusUrl) {\n      return Promise.reject(new ParameterError('The associated locus url for this meeting object must be defined.'));\n    }\n    if (MembersUtil.isInvalidInvitee(invitee)) {\n      return Promise.reject(\n        new ParameterError('The invitee must be defined with either a valid email, or emailAddress property.')\n      );\n    }\n    const options = MembersUtil.generateAddMemberOptions(invitee, this.locusUrl, alertIfActive);\n\n    return this.membersRequest.addMembers(options);\n  }\n\n  /**\n   * Admits waiting members (invited guests to meeting)\n   * @param {Array} memberIds\n   * @returns {Promise}\n   * @public\n   * @memberof Members\n   */\n  admitMembers(memberIds) {\n    if (isEmpty(memberIds)) {\n      return Promise.reject(new ParameterError('No member ids provided to admit.'));\n    }\n    const options = MembersUtil.generateAdmitMemberOptions(memberIds, this.locusUrl);\n\n    return this.membersRequest.admitMember(options);\n  }\n\n  /**\n   * Removes a member from the meeting\n   * @param {String} memberId\n   * @returns {Promise}\n   * @public\n   * @memberof Members\n   */\n  removeMember(memberId) {\n    if (!this.locusUrl) {\n      return Promise.reject(new ParameterError('The associated locus url for this meeting object must be defined.'));\n    }\n    if (!memberId) {\n      return Promise.reject(new ParameterError('The member id must be defined to remove the member.'));\n    }\n    const options = MembersUtil.generateRemoveMemberOptions(memberId, this.locusUrl);\n\n    return this.membersRequest.removeMember(options);\n  }\n\n  /**\n   * Audio mutes another member in a meeting\n   * @param {String} memberId\n   * @param {boolean} [mute] default true\n   * @returns {Promise}\n   * @public\n   * @memberof Members\n   */\n  muteMember(memberId, mute = true) {\n    if (!this.locusUrl) {\n      return Promise.reject(new ParameterError('The associated locus url for this meetings members object must be defined.'));\n    }\n    if (!memberId) {\n      return Promise.reject(new ParameterError('The member id must be defined to mute the member.'));\n    }\n    const options = MembersUtil.generateMuteMemberOptions(memberId, mute, this.locusUrl);\n\n    return this.membersRequest.muteMember(options);\n  }\n\n  /**\n   * Transfers the host to another member\n   * @param {String} memberId\n   * @param {boolean} [moderator] default true\n   * @returns {Promise}\n   * @public\n   * @memberof Members\n   */\n  transferHostToMember(memberId, moderator = true) {\n    if (!this.locusUrl) {\n      return Promise.reject(new ParameterError('The associated locus url for this meetings members object must be defined.'));\n    }\n    if (!memberId) {\n      return Promise.reject(new ParameterError('The member id must be defined to transfer host to the member.'));\n    }\n    const options = MembersUtil.generateTransferHostMemberOptions(memberId, moderator, this.locusUrl);\n\n    return this.membersRequest.transferHostToMember(options);\n  }\n}\n"]}